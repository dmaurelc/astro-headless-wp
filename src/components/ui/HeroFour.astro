---
interface Testimonial {
  name: string;
  role: string;
  avatar: string;
  rating: number;
  comment: string;
}

interface Props {
  title?: string;
  subtitle?: string;
  primaryButtonText?: string;
  primaryButtonUrl?: string;
  secondaryButtonText?: string;
  secondaryButtonUrl?: string;
  testimonials?: Testimonial[];
}

const {
  title = "Encuentra tu hogar ideal",
  subtitle = "Más de 10 años ayudando a familias a encontrar la propiedad perfecta en las mejores ubicaciones de Chile.",
  primaryButtonText = "Explorar propiedades",
  primaryButtonUrl = "/propiedades",
  secondaryButtonText = "Contactar asesor",
  secondaryButtonUrl = "/contacto",
  testimonials = [
    {
      name: "María González",
      role: "Compradora",
      avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&h=100&q=80",
      rating: 5,
      comment: "Excelente servicio, encontré mi casa ideal en solo 2 semanas."
    },
    {
      name: "Carlos Ruiz",
      role: "Inversionista",
      avatar: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&h=100&q=80",
      rating: 5,
      comment: "Proceso transparente y profesional en cada paso."
    },
    {
      name: "Ana Morales",
      role: "Vendedora",
      avatar: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=100&h=100&q=80",
      rating: 5,
      comment: "Vendí mi propiedad por encima del precio esperado."
    }
  ]
} = Astro.props;

// Función para generar estrellas
const generateStars = (rating: number) => {
  return Array.from({ length: 5 }, (_, i) => i < rating);
};
---

<section class="relative bg-background py-20 sm:py-32 overflow-hidden">
  <!-- Enhanced Background Elements -->
  <div class="absolute inset-0 overflow-hidden" aria-hidden="true">
    <!-- Main background gradient -->
    <div class="absolute inset-0 bg-gradient-to-br from-primary/8 via-background to-accent/6"></div>
    
    <!-- Large gradient orbs -->
    <div class="absolute -top-40 -right-32 h-80 w-80 rounded-full bg-gradient-to-br from-primary/15 to-accent/10 blur-3xl animate-pulse"></div>
    <div class="absolute -bottom-40 -left-32 h-80 w-80 rounded-full bg-gradient-to-tr from-secondary/10 to-primary/15 blur-3xl animate-pulse" style="animation-delay: 1s"></div>
    
    <!-- Medium accent shapes -->
    <div class="absolute top-1/4 -left-20 h-40 w-40 rounded-full bg-gradient-to-r from-primary/8 to-transparent blur-2xl"></div>
    <div class="absolute bottom-1/3 -right-20 h-60 w-60 rounded-full bg-gradient-to-l from-accent/8 to-transparent blur-2xl"></div>
    
    <!-- Additional floating elements -->
    <div class="absolute top-1/2 left-1/4 h-32 w-32 rounded-full bg-gradient-to-br from-primary/5 to-transparent blur-xl animate-pulse" style="animation-delay: 2s"></div>
    <div class="absolute top-3/4 right-1/3 h-24 w-24 rounded-full bg-gradient-to-tl from-accent/5 to-transparent blur-lg animate-pulse" style="animation-delay: 3s"></div>
    
    <!-- Grid pattern similar to HeroThree but different -->
    <div class="absolute inset-0 bg-[linear-gradient(to_right,theme(colors.border/0.3)_1px,transparent_1px),linear-gradient(to_bottom,theme(colors.border/0.3)_1px,transparent_1px)] bg-[size:32px_32px] [mask-image:radial-gradient(ellipse_70%_80%_at_50%_40%,#000_80%,transparent_120%)]"></div>
  </div>

  <div class="relative mx-auto max-w-7xl px-6 lg:px-8">
    <div class="text-center">
      <!-- Main content -->
      <div class="mx-auto max-w-4xl">
        <h1 class="text-4xl font-light tracking-tight text-foreground sm:text-6xl lg:text-7xl">
          {title}
        </h1>
        
        <p class="mx-auto mt-6 max-w-2xl text-lg leading-relaxed text-muted-foreground sm:text-xl">
          {subtitle}
        </p>

        <!-- Action buttons -->
        <div class="mt-10 flex flex-col items-center justify-center gap-4 sm:flex-row sm:gap-6">
          <a 
            href={primaryButtonUrl}
            class="group inline-flex items-center justify-center gap-2 rounded-full bg-foreground px-8 py-4 text-base font-medium text-background transition-all duration-300 hover:bg-foreground/90 hover:scale-105 shadow-lg hover:shadow-xl"
          >
            {primaryButtonText}
            <svg class="h-4 w-4 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
            </svg>
          </a>
          
          <a 
            href={secondaryButtonUrl}
            class="inline-flex items-center justify-center gap-2 rounded-full border border-border/50 bg-background/50 backdrop-blur-sm px-8 py-4 text-base font-medium text-foreground transition-all duration-300 hover:bg-background/80 hover:scale-105"
          >
            {secondaryButtonText}
          </a>
        </div>
      </div>

      <!-- Social Proof -->
      <div class="mx-auto mt-16 max-w-4xl">
        <div class="flex flex-col items-center space-y-6">
          <!-- Social proof text -->
          <div class="text-center space-y-2">
            <div class="flex items-center justify-center space-x-1">
              {Array.from({ length: 5 }).map(() => (
                <svg class="h-4 w-4 text-yellow-400 fill-current" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                </svg>
              ))}
              <span class="ml-2 text-sm font-medium text-foreground">5.0</span>
            </div>
            <p class="text-sm text-muted-foreground max-w-md">
              <strong class="text-foreground">Más de 50 familias</strong> han encontrado su hogar ideal con nosotros
            </p>
            <p class="text-xs text-muted-foreground opacity-75">
              "Excelente servicio y atención personalizada" - María G.
            </p>
          </div>
          
          <!-- Stacked Avatars -->
          <div class="flex items-center justify-center">
            <div class="flex -space-x-3">
              {testimonials.map((testimonial, index) => (
                <img 
                  src={testimonial.avatar} 
                  alt={testimonial.name}
                  class="h-12 w-12 rounded-full object-cover ring-2 ring-background shadow-lg transition-transform hover:scale-110 hover:z-10 relative"
                  style={`z-index: ${testimonials.length - index}`}
                  loading="lazy"
                />
              ))}
              <!-- Additional avatars to suggest more users -->
              <div class="h-12 w-12 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 border-2 border-background flex items-center justify-center shadow-lg">
                <span class="text-xs font-medium text-primary">+50</span>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
  
  <!-- Bottom decorative elements -->
  <div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-primary/20 via-border/50 via-primary/20 to-transparent"></div>
  
  <!-- Additional floating elements at bottom -->
  <div class="absolute bottom-10 left-1/3 h-16 w-16 rounded-full bg-gradient-to-br from-primary/5 to-accent/5 blur-lg opacity-60 animate-pulse" style="animation-delay: 4s" aria-hidden="true"></div>
  <div class="absolute bottom-16 right-1/4 h-12 w-12 rounded-full bg-gradient-to-tl from-secondary/5 to-primary/5 blur-md opacity-40 animate-pulse" style="animation-delay: 5s" aria-hidden="true"></div>
</section>
